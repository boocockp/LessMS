<link rel="import" href="../bower/polymer/polymer.html">
<script src="../bower/lodash/lodash.min.js"></script>

<dom-module id="property-editor">
    <template>
        <style>
            #editorContainer {
                width: 100%;
            }

            #editorContainer label {
                width: 7em;
            }
        </style>
        <div id="editorContainer">
            <template is="dom-repeat" items="{{componentProperties}}">
                <div>
                    <label>{{item.label}}</label>
                    <input type="text" name="{{item.name}}" value="{{item.value}}">
                </div>
            </template>
        </div>

    </template>
</dom-module>

<script>
    Polymer({
        is: 'property-editor',

        properties: {
            component: {
                type: Object,
                observer: '_onComponent'
            }
        },

        listeners: {
            change: 'onChange'
        },

        _onComponent: function(id) {
            var self = this;
            var idProp = {name: "id", label: "Id", value: self.component.id};
            var polymerProperties = _.map(this.component.properties, function(value, name) {
                return {name: name, label: _.startCase(name), value: self.component[name]}
            });
            this.componentProperties = [idProp].concat(polymerProperties);
        },

        onChange: function(e) {
            var input = e.target;
            this.component[input.name] = input.value;
            var attrName = _.kebabCase(input.name);
            this.component.setAttribute(attrName, input.value);
        },

        ready: function() {
        }

    });



</script>
