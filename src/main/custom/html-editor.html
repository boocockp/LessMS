<link rel="import" href="../bower/polymer/polymer.html">

<link rel="import" href="test-box.html">

<script>
    window.CKEDITOR_BASEPATH = "bower/ckeditor/";
</script>
<script src="../bower/ckeditor/ckeditor.js"></script>

<dom-module id="html-editor">
    <template>
        <textarea id="editarea"></textarea>
    </template>
</dom-module>

<script>
    CKEDITOR.plugins.addExternal( 'timestamp', '../../ckePlugins/timestamp/', 'plugin.js' );
    CKEDITOR.plugins.addExternal( 'box', '../../ckePlugins/box/', 'plugin.js' );

    Polymer({
        is: 'html-editor',

        properties: {
            fileData: {
                type: String,
                observer: '_fileDataChanged'
            }
        },

        _fileDataChanged: function(data) {
            this.editor.setData(data);
        },

        ready: function() {

            this.editor = CKEDITOR.replace( this.$.editarea, {
                fullPage: true,
                extraPlugins: 'docprops,timestamp,box',
                allowedContent: true,
                extraAllowedContent: 'test-box',
                height: 650
            } );
        },

        getFileData: function() {
            return this.editor.getData();
        }
    });
</script>
