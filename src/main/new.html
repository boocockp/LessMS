<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LessMS - New file</title>
    <script src="bower/webcomponentsjs/webcomponents-lite.min.js"></script>
    <script src="bower/jquery/dist/jquery.min.js"></script>
    <link href="bower/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="bower/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet">
    <link rel="import" href="custom/file-editor.html">
    <link rel="import" href="custom/user-signin-google.html">
    <link rel="import" href="custom/location-file-namer.html">
    <link rel="import" href="custom/s3-file-saver.html">
</head>
<body>
    <div class="container">
        <template id="t1" is="dom-bind">

            <user-signin-google id="usg"
                                client-id="919408445147-a0csgn7e21d773ilrif3q8d9hfrfc7vm.apps.googleusercontent.com"
                                id-token="{{idToken}}"></user-signin-google>
            <location-file-namer id="lfn" file-path="{{filePath}}" content-type="{{contentType}}"></location-file-namer>
            <file-editor file-data="{{fileData}}" content-type="{{contentType}}" saved-file-data="{{savedData}}"></file-editor>
            <s3-file-saver id="fileSaver" bucket-name="ashridgetech.cmstest"
                           file-path="{{filePath}}" google-id-token="{{idToken}}"
                           identity-pool-id="eu-west-1:c46e1da2-72cf-4965-92b8-ebe270684050"
                           content-type="{{contentType}}" file-data="{{savedData}}"></s3-file-saver>

         </template>
    </div>

    <script>
        var t = document.querySelector('#t1');

        t.addEventListener('dom-change', function() {
            t.$.fileSaver.addEventListener('saved-file-url-changed', function(e) {
                location.href = "edit.html?fileUrl=" + e.detail.value;
            });
        });
    </script>
</body>
</html>